{% extends 'base.html' %}

{% block title %}ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸{% endblock %}

{% block content %}
<div id="messageCard">{{ scripture }}</div>
<button id="change-verse" style="font-size: 20px; padding: 10px 20px;">æ–°ã—ã„ã¿è¨€è‘‰ã‚’è¡¨ç¤º</button>

<!-- æ–°ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã¿è¨€è‘‰ã®å ´æ‰€ã‚’è¿½åŠ  -->
<h1 id="verseBox" class="verse-box"></h1>

<!-- ğŸ® ã‚²ãƒ¼ãƒ ã‚­ãƒ£ãƒ³ãƒã‚¹ -->
<canvas id="gameCanvas" width="800" height="600"></canvas>
<button id="retryBtn" style="font-size: 26px;">Retry</button>

<!-- JavaScriptã®èª­ã¿è¾¼ã¿é †åºã«æ³¨æ„ -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const changeBtn = document.getElementById("change-verse");
        const verseBox = document.getElementById("verseBox");
        const messageCard = document.getElementById("messageCard");
    
        if (changeBtn && verseBox && messageCard) {
            changeBtn.addEventListener("click", async () => {
                console.log("ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸï¼"); // â† ãƒ‡ãƒãƒƒã‚°ç”¨ï¼ˆæ®‹ã—ã¦OKï¼‰
    
                try {
                    const response = await fetch('/api/random-verse?t=' + new Date().getTime()); // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾ç­–
                    const data = await response.json();
                    
                    // è¡¨ç¤ºæ›´æ–°
                    verseBox.textContent = data.verse;
                    verseBox.style.display = "block"; // è¡¨ç¤ºON
                    messageCard.textContent = data.verse;
                } catch (error) {
                    console.error("ã¿è¨€è‘‰ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:", error);
                }
            });
        }
    });
    </script>
    
    

<!-- ã‚²ãƒ¼ãƒ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æœ€å¾Œã« -->
<script src="{{ url_for('static', filename='js/game.js') }}"></script>
{% endblock %}